=============================Version1=============================#TODO1. ROI overlap   2. optimization Loop control== > the critical3. System safety and Error checking(Scripts marks)  ==>infomessage and warning4. perfect optimazation model 5. ¶àÓÃ»§Í¬Ê±Ê¹ÓÃÊ±£¬³åÍ»Ô¤·À£ºa£¬Scripts£¬b£¬perlÎÄ¼þ£¬c£¬ÁÙÊ±ÎÄµµ£¨ROI¡ª¡ªList£©MainScrits(PinnacleScripts)* DeltEmptyROI     ¶Ô¿Õ°ÐÇøROIÕûÀí* ManagPOIList     Add Iso.centerµã(pre_setting for AdjustIsoPoint)* CheckROIInfo      ROIListÐÅÏ¢É¨Ãè(call StepOne.pl)* Ìí¼ÓMRN×÷Îª½Å±¾±êÊ¾£¬»òÕßplan¡ª¡ªversionStepOne:* GetBeamDoseSet(GUI accept dosimetry inputting!),°ÐÇø´¦·½¼ÁÁ¿¾ö¶¨targetÀàÐÍ£¬¾ö¶¨Íâ·½¼ÙÌåÉèÖÃ* CreatPhantom(for dosefalloff area!)* CreatBeams(optimazition beam Angle)* AdjustIsoPoint* DefineDose* MarkDisplayRoiDVH* * IMRTInitSetting=============================Version2£ºMian Frame modifying =============================MainPinnacleScriptspart1:? DeltEmptyROI £¬¶Ô¿Õ°ÐÇøROIÕûÀí,part2: checking Info(1,Ref.point;2,Patient_extenal; 3, Planinfo)? planInfochecking! ¶ÔPatientInfoÊý¾ÝµÄ¼ì²â Infomessage.append? CheckPOIlist £¬Èç¹ûÃ»ÓÐRef.point? CheckROIInfo£¬ROIListÐÅÏ¢É¨Ãè(call StepOne.pl)Èç¹ûÃ»ÓÐPatient°ÐÇø¡£? Èç¹ûBEAM£¬Dose¾ù´æÔÚ£¬¼Æ»®ÒÑ¾­Éè¼Æ£¬²»ÄÜÖØ¸´ÔËÐÐ´Ë½Å±¾¡£Part3: manage operation? ManagPOIList £¬Add Iso.centerµã(pre_setting for AdjustIsoPoint)? Ìí¼ÓMRN×÷Îª½Å±¾±êÊ¾£¬»òÕßplan¡ª¡ªversionMRNºÅ×÷Îª²¡ÈË½Å±¾±êÊ¾£¬½«×îÖÕ½Å±¾×÷Îª²ÎÊý´«ÈëPerl½Å±¾³ÌÐò¡£main_perl_scripts:1. GetBeamDoseSet(GUI accept dosimetry inputting!),°ÐÇø´¦·½¼ÁÁ¿¾ö¶¨targetÀàÐÍ£¬¾ö¶¨Íâ·½¼ÙÌåÉèÖÃ2. CreatPhantom ¼ÁÁ¿µøÂäÇø£¬3. ROI_Overlap°ÐÇø¼ÙÌå£¬RoiList.Cureent.Volume »ñÈ¡Ìå»ýÐÅÏ¢4. AdjustIsoPoint according Ref.point5. CreatBeams(optimazition beam Angle)6. 7. DefineDose & Isodoseline & MarkDisplayRoiDVH8. 9. IMRTInitSettingPerl³ÌÐò¹Ø¼ü²ÎÊý£º1,ROIList2,Target Typer3,Prescription and Fraction number4,==============================================Version3£º20130422===============================================MainScripts:1. CheckingInfo   a,·ÇËø¶¨¼Æ»® ./Plan_X/Plan_0/Plan.Planinfo ÖÐPlanIsEditable=1   b,·Ç¶þ³Ì¼Æ»® ./Plan_X/Plan_0/Plan.Trial ÖÐPrescriptionList£¬BeamList Îª¿Õ2. DelEmptyRoi3. Check Ref.point,POI(Reference point is exist) /Plan.poiPart2:3. Checking Plan Data   ../Patient  ===> Plan_X, and Image_Set_X   a,ROI(atlist one target,Patient_external contour)  /Plan.roi             roi_name, volume, num_curve z_begin, z_end  b, Image parameters ../ImageSet_0.header4. Definition Plan_type(single,concomitant boost,ºó³Ì¼ÓÁ¿)5. Add ISO Center for Beams and Priscription dose definition6. Define Dose_off Phantom(PTV+1cm,2cm,3cm)7. Define Overlap Phantom(Bladder-PTV,Rectum-PTV.....)#TODO   red-Î´½â¾ö£¬blue-ÒÑ½â¾ö1. ROI overlap  £¬RoiList.Cureent.Volume »ñÈ¡Ìå»ýÐÅÏ¢¡£¿ÉÒÔ½â¾ö¡£2. optimization Loop control== > the critical3. System safety and Error checking(Scripts marks)  ==>infomessage and warning4. perfect optimazation model 5. ¶àÓÃ»§Í¬Ê±Ê¹ÓÃÊ±£¬³åÍ»Ô¤·À£ºa£¬Scripts£¬b£¬perlÎÄ¼þ£¬c£¬ÁÙÊ±ÎÄµµ£¨ROI¡ª¡ªList£©£¬MRNºÅ×÷Îª²¡ÈË½Å±¾±êÊ¾£¬½«×îÖÕ½Å±¾×÷Îª²ÎÊý´«ÈëPerl½Å±¾³ÌÐò¡£6. °ÐÇøÀàÐÍ£º½áºÏ´¦·½¼ÁÁ¿ÒìÍ¬£¬ÅÐ¶¨£¬Í¬²½¼ÓÁ¿»òÕß2°ÐÇø¡¢3°ÐÇø¡£7. °ÐÇøÀàÐÍ£¨Ðø£©£ºÍ¬²½¼ÓÁ¿Í³Ò»ÎªPGTV_Plan+PTV_Plan, 2°ÐÇøÍ³Ò»Îª£¨PTV1_Plan£¬PTV2_Plan£©8. Ref.point9. Remove couch10. ComputeDose Area!   Target_Up+4cm, Target_down+4cm.ImagSet_N.header±£´æÍ¼ÏñÐÅÏ¢£¬Z_start, ²ãºñÐÅÏ¢£»plan.roi PTV°ÐÇøÏêÏ¸ÐÅÏ¢£¬ËùÔÚÍ¼²ãÐÅÏ¢£¨¿ªÊ¼Óë½áÊø²ã×ø±ê+4cm£©===============================================Version4£º 20130822===============================================1£¬Adapting OAR then creating optimization list;£¨Tempplate£©PTV,Max Dose, 6300,40PTV,Min DVH,6000,95,60Cord,Max EUD,3000,20,202£¬creating virtual Objects£¬Virtual Objects cluster£»     a£¬PTV_Plan     PTV7000,PTV6300,PTV5600+-- PGTVnx,PGTVnd ==¡·PGTV6000   |_ PTV1£¬PTV2        ==¡·PTV5000 +--PGTV ==> PGTV6000   |__PTV   ==> PTV4500         b,  PTV_PRV_ring(PGTV_PRV03,PTV_PRV05,PTV_PRV10,PTV_PRV20)     c,   Overlap_Area[Rectum_Overlap,Small_Overlap]     d,  OAR_Overlap[Rectum_Opti, Small_Opti]     e,  NormalTissue£¬ColdSpot, HotSpot.AutoCreate£ºlike£º[target£¬PRV length,source num£¬source1£¬source2£¬AvoidIn num£¬ AvoudIn1£¬Avoid2....., AvoidOut num, AvoidOud1,end]ÀýÈç£º                       [PTV_PRV05,0.5,1,PTV,,3,Rectum,Bladder,Small,1,Patient, end]3, EUD a defineParallel Organ 1[0.5-3]£» Serial Orgn 8[4-15]BrainStem                             16OpticChiasm                         16eye                                    16nerve                                     16InnerEar                                 16Mandible                                 10Cord                                         20Rectum                                 8Bladder                                 8Bone                                     12Femoral_head                         12Lung                                         1Parotid Gland                             1PTV                                    -10(cold spot)initial weights setting 0.1  £­¡· 1 £­¡·hightOAR clustering
1£¬Target, 2, Overlap Area, 3, VeryImportOAR,4,OverlapArea,5 DosefallArea,6,NTmain process:1£¬Checking OAR,Then modifying OAR names to standard's names(marking DVH£©2£¬using Xtermal,dose prescription	List avliable Targets, making default choice	prescription and fraction number	TotalDose(3000,4500,6000)£¨Isodose Lines£¬PrescritionDose£©3£¬Adapting OAR, then Set Beams numbers and angles4£¬Create Opti_phantom	PTV_PRV£¬	OverLap Phantom	VIP_OAR	NormalTissure5£¬CommonSetting£¨Iso to Ref distance£©6£¬searching OAR,then add optimization target lists.

7,Optimization process, Add IMRT result assertion model
first:building the result assertion model(according to Pinnacle Challenge model)
then :assertion model adjusting the optimization parameters
