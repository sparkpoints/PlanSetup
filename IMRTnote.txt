=============================Version1=============================#TODO1. ROI overlap 2. optimization Loop control== > the critical3. System safety and Error checking(Scripts marks) ==>infomessage and warning4. perfect optimazation model5. ûͬʱʹʱͻԤaScriptsbperlļcʱĵROIListMainScrits(PinnacleScripts)* DeltEmptyROI  ԿհROI* ManagPOIList   Add Iso.center(pre_setting for AdjustIsoPoint)* CheckROIInfo   ROIListϢɨ(call StepOne.pl)* MRNΪűʾplanversionStepOne:* GetBeamDoseSet(GUI accept dosimetry inputting!),targetͣⷽ* CreatPhantom(for dosefalloff area!)* CreatBeams(optimazition beam Angle)* AdjustIsoPoint* DefineDose* MarkDisplayRoiDVH* * IMRTInitSetting=============================Version2Mian Frame modifying=============================MainPinnacleScriptspart1:? DeltEmptyROI ԿհROI,part2: checking Info(1,Ref.point;2,Patient_extenal; 3, Planinfo)? planInfochecking! PatientInfoݵļ Infomessage.append? CheckPOIlist ûRef.point? CheckROIInfoROIListϢɨ(call StepOne.pl)ûPatient? BEAMDoseڣƻѾƣظд˽űPart3: manage operation? ManagPOIList Add Iso.center(pre_setting for AdjustIsoPoint)? MRNΪűʾplanversionMRNΪ˽űʾսűΪPerlűmain_perl_scripts:1. GetBeamDoseSet(GUI accept dosimetry inputting!),targetͣⷽ2. CreatPhantom 3. ROI_Overlap壬RoiList.Cureent.Volume ȡϢ4. AdjustIsoPoint according Ref.point5. CreatBeams(optimazition beam Angle)6. 7. DefineDose & Isodoseline & MarkDisplayRoiDVH8. 9. IMRTInitSettingPerlؼ1,ROIList2,Target Typer3,Prescription and Fraction number4,==============================================Version320130422===============================================MainScripts:1. CheckingInfo a,ƻ ./Plan_X/Plan_0/Plan.Planinfo PlanIsEditable=1 b,Ƕ̼ƻ ./Plan_X/Plan_0/Plan.Trial PrescriptionListBeamList Ϊ2. DelEmptyRoi3. Check Ref.point,POI(Reference point is exist) /Plan.poiPart2:3. Checking Plan Data ../Patient===> Plan_X, and Image_Set_X a,ROI(atlist one target,Patient_external contour) /Plan.roi     roi_name, volume, num_curve z_begin, z_end b, Image parameters ../ImageSet_0.header4. Definition Plan_type(single,concomitant boost,̼)5. Add ISO Center for Beams and Priscription dose definition6. Define Dose_off Phantom(PTV+1cm,2cm,3cm)7. Define Overlap Phantom(Bladder-PTV,Rectum-PTV.....)#TODO  red-δblue-ѽ1. ROI overlap RoiList.Cureent.Volume ȡϢԽ2. optimization Loop control== > the critical3. System safety and Error checking(Scripts marks) ==>infomessage and warning4. perfect optimazation model5. ûͬʱʹʱͻԤaScriptsbperlļcʱĵROIListMRNΪ˽űʾսűΪPerlű6. ͣϴͬжͬ237. ͣͬͳһΪPGTV_Plan+PTV_Plan,2ͳһΪPTV1_PlanPTV2_Plan8. Ref.point9. Remove couch10. ComputeDose Area!  Target_Up+4cm, Target_down+4cm.ImagSet_N.headerͼϢZ_start, Ϣplan.roi PTVϸϢͼϢʼ+4cm===============================================Version420130822===============================================޸ģ1Ŀ+ڵOARTempplateƥһIMRT optimization initial PTV,Max Dose, 6300,40PTV,Min DVH,6000,95,60Cord,Max EUD,3000,20,20ֱӵôļŻĿ2virtual ObjectsɣVirtual Objectsࣻ  aPTV_Plan  PTV7000,PTV6300,PTV5600+-- PGTVnx,PGTVnd ==PGTV6000 |_ PTV1PTV2    ==PTV5000+--PGTV ==> PGTV6000 |__PTV  ==> PTV4500   b, PTV_PRV_ring(PGTV_PRV03,PTV_PRV05,PTV_PRV10,PTV_PRV20)  c,  Overlap_Area[Rectum_Overlap,Small_Overlap]  d, OAR_Overlap[Rectum_Opti, Small_Opti]  e, NormalTissueColdSpot, HotSpot.AutoCreateʽ[Ŀ꣬ųߴ磬source numsource1source2AvoidIn num AvoudIn1Avoid2....., AvoidOut num, AvoidOud1,end]磺            [PTV_PRV05,0.5,1,PTV,,3,Rectum,Bladder,Small,1,Patient, end]3, EUD a ֵ趨һ㣺Parallel Organ 1[0.5-3] Serial Orgn 8[4-15]BrainStem 16OpticChiasm 16eye 16nerve 16InnerEar 16Mandible 10Cord 20Rectum 8Bladder 8Bone 12Femoral_head 12Lung 1Parotid Gland 1PTV -10(cold spot)Ȩصʼ 0.1   1  Ż1Target, 2, Overlap Area, 3, VeryImportOAR,4,OverlapArea,5 DosefallArea,6,NTŻ1飬Բ淶ROIƽ޸ģ趨DVHʾROI2GUIܰ	List avliable Targets, ѡĬѡ	ڰļ	ִδ	ܼзࡣ趨صãIsodose LinesPrescritionDose3ݰбOARƽλжҰǶȣݾֵ4Ż	PTV_PRV	OverLap Phantom	VIP_OAR	NormalTissure5CommonSettingĵοƫƣ6ƥŻĿб